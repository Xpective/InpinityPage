<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Inpinity - Community forum for game developers and blockchain enthusiasts." name="description" />
    <title>Inpinity - Forum</title>
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/animations.css" />
    <link rel="stylesheet" href="css/dark.css" />
    <link rel="stylesheet" href="css/light.css" />
    <link rel="stylesheet" href="css/responsive.css" />
    <link rel="stylesheet" href="css/color.css" />
    <link rel="stylesheet" href="css/adapted_about_us.css" />
    <link rel="stylesheet" href="css/adapted_advertisements.css" />
    <link rel="stylesheet" href="css/adapted_combined.css"/>
    <link rel="stylesheet" href="css/adapted_comunity_guidelines.css" />
    <link rel="stylesheet" href="css/adapted_course_feedback.css" />
    <link rel="stylesheet" href="css/adapted_mft_marketplace.css"/>
    <link rel="stylesheet" href="css/adapted_profile.css"/>
    <link rel="stylesheet" href="css/combined_latest.css"/>
    <link rel="stylesheet" href="css/gamification.css" />
    <link rel="stylesheet" href="css/referral.css"/>
    <script defer src="main.js"></script>
    <!-- Ethers.js for wallet integration -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <link rel="icon" type="image/png" href="favicon.webp">
    <meta name="keywords" content="Inpinity, Game Design, Game Development, Platform, Collaboration, Forum, Tools, GameDesign, AI Development, Games of future, programming, programs, python gui">
    <meta name="author" content="Xpective">
    <meta property="og:title" content="Inpinity - Forum">
    <meta property="og:description" content="Connect your wallet, create signed topics, and discuss game development with the community.">
    <meta property="og:image" content="logo_background.jpg">
    <meta property="og:url" content="https://inpinity.online/forum.html">
    <meta name="twitter:card" content="logo_background.webp">
    <meta name="twitter:site" content="@unxpective">
    <meta name="twitter:creator" content="@Inpinity1">
    <meta name="theme-color" content="#FarbcodeIhrerWebsite">
    <meta name="robots" content="index,follow">
    <style>
        /* Forum specific styles */
        .forum-header {
            text-align: center;
            margin: 2rem 0;
        }
        .wallet-bar {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        .wallet-info {
            background: #1a1a1a;
            padding: 0.5rem 1rem;
            border-radius: 40px;
            border: 1px solid gold;
            color: gold;
            font-size: 0.9rem;
        }
        .connect-wallet-btn {
            background: gold;
            color: black;
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 40px;
            font-weight: bold;
            cursor: pointer;
        }
        .connect-wallet-btn:hover {
            transform: scale(1.05);
        }
        .category {
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        .category h2 {
            color: gold;
            margin-top: 0;
        }
        .thread-list {
            margin-top: 1rem;
        }
        .thread {
            background: #222;
            border-left: 3px solid gold;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 4px;
        }
        .thread-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        .thread-title {
            font-weight: bold;
            color: white;
        }
        .thread-meta {
            font-size: 0.8rem;
            color: #aaa;
        }
        .thread-author {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        .verified-badge {
            color: gold;
            font-size: 0.9rem;
        }
        .wallet-address {
            font-family: monospace;
            background: #333;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
        }
        .new-topic-form {
            background: #1a1a1a;
            border: 1px solid gold;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .new-topic-form input,
        .new-topic-form textarea {
            width: 100%;
            padding: 0.7rem;
            margin: 0.5rem 0;
            background: #222;
            border: 1px solid #444;
            border-radius: 4px;
            color: white;
        }
        .new-topic-form button {
            background: gold;
            color: black;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
        }
        .new-topic-form button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        .partners-section {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 2rem 0;
            padding: 1rem;
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
        }
        .partner-item a {
            padding: 0.5rem 1rem;
            background: #2a2a2a;
            border: 1px solid gold;
            border-radius: 40px;
            color: gold;
            text-decoration: none;
        }
        .partner-item a:hover {
            background: gold;
            color: black;
        }
        .search-area {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        .search-area input {
            flex: 1;
            padding: 0.7rem;
            background: #222;
            border: 1px solid #444;
            border-radius: 4px;
            color: white;
        }
        .search-area button {
            background: gold;
            color: black;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
        }
        /* Warning box */
        .warning-note {
            background: #332211;
            border: 1px solid #ffaa00;
            border-radius: 8px;
            padding: 1rem;
            margin: 2rem auto;
            max-width: 800px;
            text-align: center;
        }
        .warning-note a {
            color: gold;
        }
    </style>
</head>
<body class="forum-page">
    <header>
        <nav>
            <ul>
                <li><a aria-label="Home" href="index.html">Home</a></li>
                <li><a aria-label="Features" href="features.html">Features</a></li>
                <li><a aria-label="Game" href="game.html">Game</a></li>
                <li><a aria-label="Forum" href="forum.html">Forum</a></li>
                <li><a aria-label="Collaboration" href="collaboration.html">Collaboration</a></li>
                <li><a aria-label="Register" href="register.html">Register</a></li>
                <li><a aria-label="About" href="about.html">About</a></li>
                <li><a aria-label="Whitepaper" href="https://github.com/Xpective/InpinityPage/raw/3923cf22782286d60574c8ae9b92e693cb314215/Inpinity%20Whitepaper%20.pdf" target="_blank" rel="noopener">Whitepaper</a></li>
                <li><a aria-label="FAQ" href="faq.html">FAQ</a></li>
                <li><a aria-label="Guestbook" href="guestbook.html">Guestbook</a></li>
                <li><a aria-label="Advertising" href="advertising.html">Advertising</a></li>
                <li><a aria-label="Profile" href="profile.html">Profile</a></li>
                <div class="themeDots">
                    <div class="dot light" title="Light Theme"></div>
                    <div class="dot dark" title="Dark Theme"></div>
                    <div class="dot basic" title="Basic Theme"></div>
                </div>
            </ul>
        </nav>
        <style>
            .themeDots .dot {
                display: inline-block;
                width: 20px;
                height: 20px;
                border-radius: 50%;
                margin: 5px;
                cursor: pointer;
                transition: transform 0.2s;
            }
            .themeDots .dot.light { background-color: #FFFFFF; }
            .themeDots .dot.dark { background-color: #000000; }
            .themeDots .dot.basic { background-color: var(--quinary-color); }
            .themeDots .dot:hover { transform: scale(1.2); }
        </style>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                document.querySelector('.themeDots .dot.light')?.addEventListener('click', () => document.body.setAttribute('data-theme', 'light'));
                document.querySelector('.themeDots .dot.dark')?.addEventListener('click', () => document.body.setAttribute('data-theme', 'dark'));
                document.querySelector('.themeDots .dot.basic')?.addEventListener('click', () => document.body.setAttribute('data-theme', 'basic'));
            });
        </script>
    </header>

    <main class="container">
        <!-- Warning about ToshiMart -->
        <div class="warning-note">
            <p>‚ö†Ô∏è <strong>Important Update:</strong> We have withdrawn from ToshiMart due to phishing concerns. Our new INPI token is <code>0x232FB12582ac10d5fAd97e9ECa22670e8Ba67d0D</code>. All official contracts are listed on our <a href="index.html">homepage</a>. Do not interact with the old token or ToshiMart pools.</p>
        </div>

        <!-- Partners Section (ToshiMart removed) -->
        <div class="partners-section">
            <div class="partner-item"><a href="https://base.org/" target="_blank">‚ö° Base L2</a></div>
            <div class="partner-item"><a href="https://uniswap.org/" target="_blank">ü¶Ñ Uniswap</a></div>
        </div>

        <!-- Forum Header with Wallet -->
        <div class="forum-header">
            <h1 class="hero-title">üí¨ Inpinity Forum</h1>
            <p>Connect your wallet, discuss game development, and share your projects with the community.</p>
        </div>

        <!-- Wallet Bar -->
        <div class="wallet-bar">
            <div id="walletInfo" style="display: none;" class="wallet-info">
                <span id="walletAddressDisplay"></span>
            </div>
            <button id="connectWalletBtn" class="connect-wallet-btn">üîå Connect Wallet</button>
        </div>

        <!-- Search Area -->
        <div class="search-area">
            <input type="text" id="searchInput" placeholder="Search topics...">
            <button id="searchButton">üîç Search</button>
        </div>

        <!-- New Topic Form -->
        <div class="new-topic-form">
            <h2>Create a new topic</h2>
            <input type="text" id="topicTitle" placeholder="Title">
            <textarea id="topicContent" rows="4" placeholder="What's on your mind?"></textarea>
            <button id="createTopicBtn">üìù Post Topic (signed with wallet)</button>
        </div>

        <!-- Forum Categories with Threads -->
        <section id="forum-categories">
            <!-- Category 1: General Discussion -->
            <div class="category">
                <h2>üí¨ General Discussion</h2>
                <p>Share thoughts, ideas, and general questions about game development and more.</p>
                <div class="thread-list" id="threads-general">
                    <!-- Threads will be loaded here -->
                </div>
            </div>

            <!-- Category 2: Technical Help -->
            <div class="category">
                <h2>üõ†Ô∏è Technical Help</h2>
                <p>Looking for technical support or have solutions? This is your area.</p>
                <div class="thread-list" id="threads-tech"></div>
            </div>

            <!-- Category 3: Project Showcase -->
            <div class="category">
                <h2>üéÆ Project Showcase</h2>
                <p>Present your current project and get feedback from the community.</p>
                <div class="thread-list" id="threads-showcase"></div>
            </div>
        </section>

        <!-- Search Results (hidden by default) -->
        <section id="search-results" style="display: none;">
            <h2>Search Results</h2>
            <div id="results-list"></div>
        </section>
    </main>

    <footer>
        <p>¬© 2026 Inpinity. All rights reserved. Working with <a href="https://base.org/" target="_blank" style="color: gold;">Base</a> and <a href="https://uniswap.org/" target="_blank" style="color: gold;">Uniswap</a>.</p>
        <div class="footer-links">
            <a href="privacypolicy.html">Privacy Policy</a>
            <a href="termsofuse.html">Terms of Use</a>
            <a href="contact.html">Contact</a>
            <a href="faq.html">FAQ</a>
            <a href="guestbook.html">Guestbook</a>
            <a href="advertising.html">Advertising</a>
            <a href="profile.html">Profile</a>
        </div>
    </footer>

    <script>
        (function() {
            // ========== Configuration ==========
            const STORAGE_KEY = 'inpinity_forum_threads';

            // ========== DOM Elements ==========
            const connectBtn = document.getElementById('connectWalletBtn');
            const walletInfo = document.getElementById('walletInfo');
            const walletAddressDisplay = document.getElementById('walletAddressDisplay');
            const createTopicBtn = document.getElementById('createTopicBtn');
            const topicTitle = document.getElementById('topicTitle');
            const topicContent = document.getElementById('topicContent');
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const searchResults = document.getElementById('search-results');
            const resultsList = document.getElementById('results-list');
            const threadsGeneral = document.getElementById('threads-general');
            const threadsTech = document.getElementById('threads-tech');
            const threadsShowcase = document.getElementById('threads-showcase');

            // ========== State ==========
            let provider, signer, userAddress = null;
            // Load threads from localStorage or initialize with sample data
            let threads = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [
                {
                    id: 1,
                    title: 'Welcome to the forum!',
                    content: 'This is a place to discuss everything about game development and blockchain.',
                    author: '0x1234...5678',
                    category: 'general',
                    timestamp: new Date().toISOString()
                },
                {
                    id: 2,
                    title: 'How to optimize Unreal Engine for Base?',
                    content: 'Anyone have tips for integrating blockchain into UE5?',
                    author: '0xabcd...efgh',
                    category: 'tech',
                    timestamp: new Date().toISOString()
                },
                {
                    id: 3,
                    title: 'My first blockchain game',
                    content: 'Check out my demo using Inpinity tools!',
                    author: '0x9876...5432',
                    category: 'showcase',
                    timestamp: new Date().toISOString()
                }
            ];

            // ========== Helper Functions ==========
            function saveThreads() {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(threads));
            }

            function formatAddress(address) {
                if (!address) return '';
                return address.substring(0, 6) + '...' + address.substring(address.length - 4);
            }

            function renderThreads() {
                // Clear lists
                threadsGeneral.innerHTML = '';
                threadsTech.innerHTML = '';
                threadsShowcase.innerHTML = '';

                // Sort by newest first
                const sorted = [...threads].sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

                sorted.forEach(thread => {
                    const threadEl = document.createElement('div');
                    threadEl.className = 'thread';
                    threadEl.setAttribute('data-category', thread.category);
                    threadEl.innerHTML = `
                        <div class="thread-header">
                            <span class="thread-title">${escapeHtml(thread.title)}</span>
                            <span class="thread-meta">${new Date(thread.timestamp).toLocaleString()}</span>
                        </div>
                        <div class="thread-content" style="margin:0.5rem 0; color:#ccc;">${escapeHtml(thread.content)}</div>
                        <div class="thread-author">
                            <span>Posted by </span>
                            <span class="wallet-address">${escapeHtml(thread.author)}</span>
                            <span class="verified-badge" title="Signed with wallet">‚úÖ</span>
                        </div>
                    `;

                    if (thread.category === 'general') threadsGeneral.appendChild(threadEl);
                    else if (thread.category === 'tech') threadsTech.appendChild(threadEl);
                    else if (thread.category === 'showcase') threadsShowcase.appendChild(threadEl);
                });
            }

            function escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            // ========== Wallet Connection ==========
            async function connectWallet() {
                if (typeof window.ethereum === 'undefined') {
                    alert('MetaMask or another Web3 wallet is not installed.');
                    return;
                }
                try {
                    provider = new ethers.BrowserProvider(window.ethereum);
                    await provider.send("eth_requestAccounts", []);
                    signer = await provider.getSigner();
                    userAddress = await signer.getAddress();
                    walletAddressDisplay.textContent = formatAddress(userAddress);
                    walletInfo.style.display = 'block';
                    connectBtn.textContent = '‚úÖ Connected';
                    connectBtn.disabled = true;
                } catch (err) {
                    console.error(err);
                    alert('Connection failed.');
                }
            }

            function disconnectWallet() {
                userAddress = null;
                provider = null;
                signer = null;
                walletInfo.style.display = 'none';
                connectBtn.textContent = 'üîå Connect Wallet';
                connectBtn.disabled = false;
            }

            // ========== Create Topic ==========
            function createTopic() {
                if (!userAddress) {
                    alert('Please connect your wallet first.');
                    return;
                }
                const title = topicTitle.value.trim();
                const content = topicContent.value.trim();
                if (!title || !content) {
                    alert('Please enter both title and content.');
                    return;
                }

                // Determine category (simplified: could add a dropdown, but we'll just assign to general for demo)
                const category = 'general'; // In a real app, you'd have a category selector

                const newThread = {
                    id: Date.now(),
                    title,
                    content,
                    author: userAddress,
                    category,
                    timestamp: new Date().toISOString()
                };

                threads.push(newThread);
                saveThreads();
                renderThreads();

                // Clear form
                topicTitle.value = '';
                topicContent.value = '';
            }

            // ========== Search ==========
            function searchTopics() {
                const query = searchInput.value.trim().toLowerCase();
                if (!query) {
                    searchResults.style.display = 'none';
                    return;
                }

                const results = threads.filter(thread => 
                    thread.title.toLowerCase().includes(query) || 
                    thread.content.toLowerCase().includes(query)
                );

                if (results.length > 0) {
                    resultsList.innerHTML = results.map(thread => `
                        <div class="thread">
                            <div class="thread-header">
                                <span class="thread-title">${escapeHtml(thread.title)}</span>
                                <span class="thread-meta">${new Date(thread.timestamp).toLocaleString()}</span>
                            </div>
                            <div class="thread-content">${escapeHtml(thread.content)}</div>
                            <div class="thread-author">by ${escapeHtml(thread.author)}</div>
                        </div>
                    `).join('');
                    searchResults.style.display = 'block';
                } else {
                    resultsList.innerHTML = '<p>No results found.</p>';
                    searchResults.style.display = 'block';
                }
            }

            // ========== Event Listeners ==========
            connectBtn.addEventListener('click', connectWallet);
            createTopicBtn.addEventListener('click', createTopic);
            searchButton.addEventListener('click', searchTopics);
            searchInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') searchTopics();
            });

            // Initial render
            renderThreads();

            // Check if already connected (e.g., after page reload)
            window.addEventListener('load', async () => {
                if (window.ethereum && window.ethereum.selectedAddress) {
                    await connectWallet();
                }
            });
        })();
    </script>
</body>
</html>
