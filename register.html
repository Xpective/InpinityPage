<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inpinity - Register</title>
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/animations.css" />
    <link rel="stylesheet" href="css/dark.css" />
    <link rel="stylesheet" href="css/light.css" />
    <link rel="stylesheet" href="css/responsive.css" />
    <link rel="stylesheet" href="css/color.css" />
    <link rel="stylesheet" href="css/adapted_about_us.css" />
    <link rel="stylesheet" href="css/adapted_advertisements.css" />
    <link rel="stylesheet" href="css/adapted_combined.css"/>
    <link rel="stylesheet" href="css/adapted_comunity_guidelines.css" />
    <link rel="stylesheet" href="css/adapted_course_feedback.css" />
    <link rel="stylesheet" href="css/adapted_mft_marketplace.css"/>
    <link rel="stylesheet" href="css/adapted_profile.css"/>
    <link rel="stylesheet" href="css/combined_latest.css"/>
    <link rel="stylesheet" href="css/gamification.css" />
    <link rel="stylesheet" href="css/referral.css"/>
    <script defer src="main.js"></script>
    <!-- Ethers.js for wallet integration -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <link rel="icon" type="image/png" href="favicon.webp">
    <meta name="keywords" content="Inpinity, Game Design, Game Development, Platform, Collaboration, Forum, Tools, GameDesign, AI Development, Games of future, programming, programs, python gui">
    <meta name="author" content="Xpective">
    <meta property="og:title" content="Inpinity - Register">
    <meta property="og:description" content="Register with your wallet and join the Inpinity community.">
    <meta property="og:image" content="logo_background.jpg">
    <meta property="og:url" content="https://inpinity.online/register.html">
    <meta name="twitter:card" content="logo_background.webp">
    <meta name="twitter:site" content="@unxpective">
    <meta name="twitter:creator" content="@Inpinity1">
    <meta name="theme-color" content="#FarbcodeIhrerWebsite">
    <meta name="robots" content="index,follow">
    <style>
        /* Register page specific styles */
        .register-container {
            max-width: 500px;
            margin: 2rem auto;
            padding: 2rem;
            background: #1a1a1a;
            border: 1px solid gold;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(255,215,0,0.2);
        }
        .register-container h1 {
            color: gold;
            text-align: center;
            margin-bottom: 2rem;
        }
        .wallet-section {
            text-align: center;
            margin-bottom: 2rem;
        }
        .connect-wallet-btn {
            background: gold;
            color: black;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 40px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .connect-wallet-btn:hover {
            transform: scale(1.05);
        }
        .wallet-info {
            background: #222;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            color: #ccc;
            word-break: break-all;
        }
        .wallet-info .address {
            color: gold;
            font-family: monospace;
        }
        .form-group {
            margin: 1.5rem 0;
        }
        .form-group label {
            display: block;
            color: gold;
            margin-bottom: 0.5rem;
        }
        .form-group input {
            width: 100%;
            padding: 0.7rem;
            background: #222;
            border: 1px solid #444;
            border-radius: 4px;
            color: white;
        }
        .form-group input:focus {
            outline: none;
            border-color: gold;
        }
        .register-btn {
            width: 100%;
            background: gold;
            color: black;
            border: none;
            padding: 0.75rem;
            border-radius: 4px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.2s;
        }
        .register-btn:hover {
            background: #ffd700;
        }
        .register-btn:disabled {
            background: #666;
            cursor: not-allowed;
        }
        .login-link {
            text-align: center;
            margin-top: 1rem;
        }
        .login-link a {
            color: gold;
        }
        .partners-section {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 2rem 0;
            padding: 1rem;
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
        }
        .partner-item a {
            padding: 0.5rem 1rem;
            background: #2a2a2a;
            border: 1px solid gold;
            border-radius: 40px;
            color: gold;
            text-decoration: none;
        }
        .partner-item a:hover {
            background: gold;
            color: black;
        }
        .warning-note {
            background: #332211;
            border: 1px solid #ffaa00;
            border-radius: 8px;
            padding: 1rem;
            margin: 2rem auto;
            max-width: 800px;
            text-align: center;
        }
        .warning-note a {
            color: gold;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a aria-label="Home" href="index.html">Home</a></li>
                <li><a aria-label="Features" href="features.html">Features</a></li>
                <li><a aria-label="Game" href="game.html">Game</a></li>
                <li><a aria-label="Forum" href="forum.html">Forum</a></li>
                <li><a aria-label="Collaboration" href="collaboration.html">Collaboration</a></li>
                <li><a aria-label="Register" href="register.html">Register</a></li>
                <li><a aria-label="About" href="about.html">About</a></li>
                <li><a aria-label="Whitepaper" href="https://github.com/Xpective/InpinityPage/raw/3923cf22782286d60574c8ae9b92e693cb314215/Inpinity%20Whitepaper%20.pdf" target="_blank" rel="noopener">Whitepaper</a></li>
                <li><a aria-label="FAQ" href="faq.html">FAQ</a></li>
                <li><a aria-label="Guestbook" href="guestbook.html">Guestbook</a></li>
                <li><a aria-label="Advertising" href="advertising.html">Advertising</a></li>
                <li><a aria-label="Profile" href="profile.html">Profile</a></li>
                <div class="themeDots">
                    <div class="dot light" title="Light Theme"></div>
                    <div class="dot dark" title="Dark Theme"></div>
                    <div class="dot basic" title="Basic Theme"></div>
                </div>
            </ul>
        </nav>
        <style>
            .themeDots .dot {
                display: inline-block;
                width: 20px;
                height: 20px;
                border-radius: 50%;
                margin: 5px;
                cursor: pointer;
                transition: transform 0.2s;
            }
            .themeDots .dot.light { background-color: #FFFFFF; }
            .themeDots .dot.dark { background-color: #000000; }
            .themeDots .dot.basic { background-color: var(--quinary-color); }
            .themeDots .dot:hover { transform: scale(1.2); }
        </style>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                document.querySelector('.themeDots .dot.light')?.addEventListener('click', () => document.body.setAttribute('data-theme', 'light'));
                document.querySelector('.themeDots .dot.dark')?.addEventListener('click', () => document.body.setAttribute('data-theme', 'dark'));
                document.querySelector('.themeDots .dot.basic')?.addEventListener('click', () => document.body.setAttribute('data-theme', 'basic'));
            });
        </script>
    </header>

    <main>
        <!-- Warning about ToshiMart -->
        <div class="warning-note">
            <p>‚ö†Ô∏è <strong>Important Update:</strong> We have withdrawn from ToshiMart due to phishing concerns. Our new INPI token is <code>0x232FB12582ac10d5fAd97e9ECa22670e8Ba67d0D</code>. All official contracts are listed on our <a href="index.html">homepage</a>. Do not interact with the old token or ToshiMart pools.</p>
        </div>

        <!-- Partners Section (ToshiMart removed) -->
        <div class="partners-section">
            <div class="partner-item"><a href="https://base.org/" target="_blank">‚ö° Base L2</a></div>
            <div class="partner-item"><a href="https://uniswap.org/" target="_blank">ü¶Ñ Uniswap</a></div>
        </div>

        <div class="register-container">
            <h1>üìù Register with Inpinity</h1>

            <!-- Wallet Connection Section -->
            <div class="wallet-section">
                <button id="connectWalletBtn" class="connect-wallet-btn">üîå Connect Wallet</button>
                <div id="walletInfo" class="wallet-info" style="display: none;">
                    Connected: <span id="walletAddress" class="address"></span>
                </div>
            </div>

            <!-- Registration Form -->
            <form id="registerForm">
                <div class="form-group">
                    <label for="username">Username *</label>
                    <input type="text" id="username" required placeholder="e.g., GameMaster">
                </div>
                <div class="form-group">
                    <label for="email">Email (optional)</label>
                    <input type="email" id="email" placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="password">Password *</label>
                    <input type="password" id="password" required placeholder="********">
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password *</label>
                    <input type="password" id="confirmPassword" required placeholder="********">
                </div>
                <button type="submit" id="registerBtn" class="register-btn">‚úÖ Register</button>
            </form>

            <div class="login-link">
                Already have an account? <a href="profile.html">Go to Profile</a>
            </div>
        </div>
    </main>

    <footer>
        <p>¬© 2026 Inpinity. All rights reserved. Working with <a href="https://base.org/" target="_blank" rel="noopener" style="color: gold;">Base</a> and <a href="https://uniswap.org/" target="_blank" rel="noopener" style="color: gold;">Uniswap</a>.</p>
        <div class="footer-links">
            <a href="privacypolicy.html">Privacy Policy</a>
            <a href="termsofuse.html">Terms of Use</a>
            <a href="contact.html">Contact</a>
            <a href="faq.html">FAQ</a>
            <a href="guestbook.html">Guestbook</a>
            <a href="advertising.html">Advertising</a>
            <a href="profile.html">Profile</a>
        </div>
    </footer>

    <script>
        (function() {
            // ========== Configuration ==========
            const INPI_CONTRACT_ADDRESS = '0x232FB12582ac10d5fAd97e9ECa22670e8Ba67d0D'; // new token

            // ========== DOM Elements ==========
            const connectBtn = document.getElementById('connectWalletBtn');
            const walletInfo = document.getElementById('walletInfo');
            const walletAddressSpan = document.getElementById('walletAddress');
            const registerForm = document.getElementById('registerForm');
            const usernameInput = document.getElementById('username');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const confirmInput = document.getElementById('confirmPassword');
            const registerBtn = document.getElementById('registerBtn');

            // ========== State ==========
            let provider, signer, userAddress = null;

            // Helper: format address
            function formatAddress(address) {
                if (!address) return '';
                return address.substring(0, 6) + '...' + address.substring(address.length - 4);
            }

            // Connect wallet
            async function connectWallet() {
                if (typeof window.ethereum === 'undefined') {
                    alert('MetaMask or another Web3 wallet is not installed.');
                    return;
                }
                try {
                    provider = new ethers.BrowserProvider(window.ethereum);
                    await provider.send("eth_requestAccounts", []);
                    signer = await provider.getSigner();
                    userAddress = await signer.getAddress();
                    walletAddressSpan.textContent = formatAddress(userAddress) + ' (' + userAddress + ')';
                    walletInfo.style.display = 'block';
                    connectBtn.textContent = '‚úÖ Wallet Connected';
                    connectBtn.disabled = true;
                } catch (err) {
                    console.error(err);
                    alert('Connection failed.');
                }
            }

            // Handle registration
            function registerUser(e) {
                e.preventDefault();

                // Basic validation
                const username = usernameInput.value.trim();
                const email = emailInput.value.trim();
                const password = passwordInput.value.trim();
                const confirm = confirmInput.value.trim();

                if (!username) {
                    alert('Username is required.');
                    return;
                }
                if (password.length < 6) {
                    alert('Password must be at least 6 characters.');
                    return;
                }
                if (password !== confirm) {
                    alert('Passwords do not match.');
                    return;
                }
                if (!userAddress) {
                    alert('Please connect your wallet first.');
                    return;
                }

                // Simulate password hashing (client-side, just for demo)
                const fakeHash = btoa(password + 'salt'); // not secure, just for demonstration

                // Create user object
                const userData = {
                    username: username,
                    email: email,
                    wallet: userAddress,
                    passwordHash: fakeHash,
                    registeredAt: new Date().toISOString()
                };

                // Store in localStorage (keyed by wallet address)
                const key = 'user_' + userAddress.toLowerCase();
                localStorage.setItem(key, JSON.stringify(userData));

                // Also store current session (which wallet is logged in)
                localStorage.setItem('currentWallet', userAddress.toLowerCase());

                alert('Registration successful! Redirecting to profile...');
                window.location.href = 'profile.html';
            }

            // Event listeners
            connectBtn.addEventListener('click', connectWallet);
            registerForm.addEventListener('submit', registerUser);

            // Pre-fill if already connected? (optional)
            window.addEventListener('load', async () => {
                if (window.ethereum && window.ethereum.selectedAddress) {
                    await connectWallet();
                }
            });
        })();
    </script>
</body>
</html>
